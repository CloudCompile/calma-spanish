# Pollinations.AI Integration - Visual Flow

## User Journey with AI Models

### 1. Landing Page
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Aprende                      â”‚
â”‚   Learn Spanish your way             â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  5 Learning Modes              â”‚  â”‚
â”‚  â”‚  8+ AI Models                  â”‚  â”‚
â”‚  â”‚  âˆ Your Pace                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â”‚  Powered by Pollinations.AI          â”‚
â”‚  GPT-4, Claude, Gemini & more        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Dashboard
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Welcome back, Learner               â”‚
â”‚  Ready to continue?  [Using: GPT-4]  â”‚
â”‚                                      â”‚
â”‚  [Mode Selector Cards]               â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Confidence: 50%               â”‚  â”‚
â”‚  â”‚  Words: 0  Lessons: 0          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ§  AI-Powered Learning        â”‚  â”‚
â”‚  â”‚  Currently using openai model  â”‚  â”‚
â”‚  â”‚              [Switch Model]    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Settings Screen
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸ Settings                          â”‚
â”‚                                      â”‚
â”‚  Profile         â”‚  AI Configuration â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Name     â”‚   â”‚  â”‚ğŸ§  Model       â”‚â”‚
â”‚  â”‚ ID       â”‚   â”‚  â”‚   [Dropdown]  â”‚â”‚
â”‚  â”‚ Since    â”‚   â”‚  â”‚              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚ Available:    â”‚â”‚
â”‚                 â”‚  â”‚ â€¢ OpenAI âœ“    â”‚â”‚
â”‚  Preferences    â”‚  â”‚ â€¢ Claude      â”‚â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚ â€¢ Gemini      â”‚â”‚
â”‚  â”‚Immersion â”‚   â”‚  â”‚ â€¢ Mistral     â”‚â”‚
â”‚  â”‚[0â”€â”€â”€â”€â—â”€â”€10]â”‚  â”‚ â€¢ Llama       â”‚â”‚
â”‚  â”‚          â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”‚Mode:     â”‚   â”‚  Image Models    â”‚
â”‚  â”‚Smart     â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚          â”‚   â”‚  â”‚ â€¢ flux        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚ â€¢ turbo       â”‚â”‚
â”‚  [Save Changes] â”‚  â”‚ â€¢ kontext     â”‚â”‚
â”‚                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## API Call Flow

### Learning Mode Session
```
User Action           â†’  AI Service Call         â†’  Pollinations API
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Select "Smart Tutor"
                     â†’  generateLesson()        â†’  POST /v1/chat/completions
                                                   {
                                                     model: "openai",
                                                     messages: [
                                                       {role: "system", content: "..."},
                                                       {role: "user", content: "..."}
                                                     ]
                                                   }

2. Submit Answer
                     â†’  checkExerciseAnswer()   â†’  POST /v1/chat/completions
                                                   {
                                                     model: "openai",
                                                     temperature: 0.6
                                                   }
```

### Conversation Mode Session
```
User Action           â†’  AI Service Call         â†’  Pollinations API
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Select Role (Barista)
                     â†’  respondToConversation() â†’  POST /v1/chat/completions
                                                   {
                                                     model: "openai",
                                                     messages: [
                                                       {role: "system", content: "You're a barista..."},
                                                       ...history
                                                     ],
                                                     temperature: 0.9
                                                   }

2. End Conversation
                     â†’  generateFeedback()      â†’  POST /v1/chat/completions
                                                   {
                                                     model: "openai",
                                                     temperature: 0.6,
                                                     messages: [feedback analysis]
                                                   }
```

### Media-Based Learning
```
User Action           â†’  AI Service Call         â†’  Pollinations API
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Paste YouTube URL
                     â†’  simplifyMediaContent()  â†’  POST /v1/chat/completions
                                                   {
                                                     model: "openai",
                                                     messages: [content analysis],
                                                     temperature: 0.7
                                                   }
```

## Model Selection Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      App Component                          â”‚
â”‚                                                             â”‚
â”‚  State:                                                     â”‚
â”‚  â€¢ currentTextModel: PollinationsTextModel = 'openai'      â”‚
â”‚  â€¢ Persisted with useKV('ai-text-model')                  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         Settings Screen                             â”‚   â”‚
â”‚  â”‚  - ModelSelector component                          â”‚   â”‚
â”‚  â”‚  - Fetches available models from API                â”‚   â”‚
â”‚  â”‚  - Updates currentTextModel state                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â†“                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚      Learning Interface Components                  â”‚   â”‚
â”‚  â”‚  - SmartTutorInterface                              â”‚   â”‚
â”‚  â”‚  - ConversationInterface                            â”‚   â”‚
â”‚  â”‚  - GameFirstInterface                               â”‚   â”‚
â”‚  â”‚  - MediaBasedInterface                              â”‚   â”‚
â”‚  â”‚  - SlowHumanInterface                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â†“                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         AI Service (ai-service.ts)                  â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  Methods accept optional 'model' parameter:         â”‚   â”‚
â”‚  â”‚  â€¢ chatCompletion(messages, {model, temp, max})    â”‚   â”‚
â”‚  â”‚  â€¢ generateLesson(..., model?)                      â”‚   â”‚
â”‚  â”‚  â€¢ respondToConversation(..., model?)              â”‚   â”‚
â”‚  â”‚  â€¢ generateFeedback(..., model?)                    â”‚   â”‚
â”‚  â”‚  â€¢ simplifyMediaContent(..., model?)               â”‚   â”‚
â”‚  â”‚  â€¢ checkExerciseAnswer(..., model?)                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â†“                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚      Pollinations.AI API                            â”‚   â”‚
â”‚  â”‚      https://gen.pollinations.ai                    â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  â€¢ /v1/chat/completions (text generation)          â”‚   â”‚
â”‚  â”‚  â€¢ /text/{prompt} (simple text)                     â”‚   â”‚
â”‚  â”‚  â€¢ /image/{prompt} (image generation)              â”‚   â”‚
â”‚  â”‚  â€¢ /v1/models (discover text models)               â”‚   â”‚
â”‚  â”‚  â€¢ /image/models (discover image models)           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Model Types & Characteristics

### PollinationsTextModel Type
```typescript
type PollinationsTextModel = 
  | 'openai'        // Default, balanced
  | 'openai-fast'   // Faster responses
  | 'openai-large'  // Large context window
  | 'qwen-coder'    // Technical content
  | 'mistral'       // Multilingual
  | 'gemini'        // Google AI with search
  | 'claude'        // Advanced reasoning
  | 'llama'         // Open source
```

### Model Selection UI Components
```
ModelSelector
â”œâ”€â”€ Fetches available models from API
â”œâ”€â”€ Displays model capabilities (tools, vision, audio)
â”œâ”€â”€ Shows model descriptions
â””â”€â”€ Updates user preference

CurrentModelBadge
â”œâ”€â”€ Shows active model on dashboard
â”œâ”€â”€ Small, unobtrusive design
â””â”€â”€ Links to settings for easy switching
```

## Data Persistence

```
useKV Storage Keys:
â”œâ”€â”€ 'user-profile'        : UserProfile (name, mode, immersion, etc.)
â”œâ”€â”€ 'ai-text-model'       : PollinationsTextModel (selected AI model)
â”œâ”€â”€ 'learning-memory'     : LearningMemory (mistakes, mastery, history)
â””â”€â”€ 'progress-metrics'    : ProgressMetrics (stats, confidence, etc.)
```

## Error Handling Flow

```
API Call
  â†“
try {
  fetch(pollinations.ai/endpoint)
} catch (error) {
  â†“
  console.error()
  â†“
  toast.error("User-friendly message")
  â†“
  throw error (for component handling)
}
```

## Future Enhancement Ideas

1. **Streaming Support**
   ```
   POST /v1/chat/completions
   { stream: true }
   â†’ Real-time response display
   ```

2. **Image Generation Integration**
   ```
   GET /image/{prompt}
   â†’ Generate vocabulary flashcards
   â†’ Create scene illustrations
   ```

3. **Model Performance Tracking**
   ```
   Track per user:
   â€¢ Response quality ratings
   â€¢ Response times
   â€¢ User satisfaction
   â†’ Recommend best model
   ```

4. **Custom Model Parameters**
   ```
   Settings UI:
   â€¢ Temperature slider (0.0 - 2.0)
   â€¢ Max tokens input
   â€¢ Top-p slider
   â€¢ Frequency penalty
   ```

5. **Cost Tracking**
   ```
   Monitor Pollen usage:
   â€¢ Per session
   â€¢ Per model
   â€¢ Total spent
   â†’ Display in dashboard
   ```
